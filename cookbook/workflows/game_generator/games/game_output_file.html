<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroids Game</title>
    <style>
        body, html {
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #111;
        }
        canvas {
            background-color: #000;
            border: 2px solid #fff;
        }
        #instructions {
            color: #fff;
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 2;
        }
        #score {
            color: #fff;
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 2;
        }
    </style>
</head>
<body>
    <div id="instructions">
        <h3>Instructions:</h3>
        <p>Use Arrow keys to navigate the spaceship and Spacebar to shoot the asteroids.</p>
    </div>
    <div id="score">Score: 0</div>
    <canvas id="gameCanvas" width="800px" height="600px"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let score = 0;
        let keys = {};

        function radToDeg(rad) {
            return rad * (180 / Math.PI);
        }

        function degToRad(deg) {
            return deg * (Math.PI / 180);
        }

        class Spaceship {
            constructor() {
                this.x = canvas.width / 2;
                this.y = canvas.height / 2;
                this.radius = 15;
                this.angle = 0;
                this.rotation = 0;
                this.speed = 0;
                this.friction = 0.99;
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(degToRad(this.angle));
                ctx.beginPath();
                ctx.moveTo(0, -this.radius);
                ctx.lineTo(this.radius, this.radius);
                ctx.lineTo(-this.radius, this.radius);
                ctx.closePath();
                ctx.strokeStyle = '#00FF00';
                ctx.stroke();
                ctx.restore();
            }

            update() {
                if (keys['Space']) {
                    shoot();
                }

                if (keys['ArrowLeft']) {
                    this.rotation = -5;
                }

                if (keys['ArrowRight']) {
                    this.rotation = 5;
                }

                if (keys['ArrowUp']) {
                    this.speed += 0.1;
                }

                this.angle += this.rotation;
                this.rotation = 0;
                this.speed *= this.friction;

                this.x += this.speed * Math.cos(degToRad(this.angle));
                this.y += this.speed * Math.sin(degToRad(this.angle));

                // Wrap around the screen
                if (this.x < 0) this.x = canvas.width;
                if (this.x > canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height;
                if (this.y > canvas.height) this.y = 0;
            }
        }

        class Asteroid {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.radius = Math.random() * 30 + 20;
                this.angle = Math.random() * 360;
                this.speed = Math.random() * 2 + 1;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.strokeStyle = '#808080';
                ctx.stroke();
                ctx.closePath();
            }

            update() {
                this.x += this.speed * Math.cos(degToRad(this.angle));
                this.y += this.speed * Math.sin(degToRad(this.angle));

                // Wrap around the screen
                if (this.x < 0) this.x = canvas.width;
                if (this.x > canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height;
                if (this.y > canvas.height) this.y = 0;
            }
        }

        const spaceship = new Spaceship();
        const asteroids = [];
        let bullets = [];

        function shoot() {
            bullets.push({
                x: spaceship.x,
                y: spaceship.y,
                angle: spaceship.angle,
                speed: 5
            });
        }

        function drawBullets() {
            bullets.forEach((bullet, index) => {
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = '#FF0000';
                ctx.fill();
                ctx.closePath();

                bullet.x += bullet.speed * Math.cos(degToRad(bullet.angle));
                bullet.y += bullet.speed * Math.sin(degToRad(bullet.angle));

                // Remove bullets that are out of bounds
                if (
                    bullet.x < 0 ||
                    bullet.x > canvas.width ||
                    bullet.y < 0 ||
                    bullet.y > canvas.height
                ) {
                    bullets.splice(index, 1);
                }
            });
        }

        function checkCollisions() {
            asteroids.forEach((asteroid, index) => {
                // Check collision with spaceship
                const dist = Math.sqrt(
                    (asteroid.x - spaceship.x) ** 2 +
                    (asteroid.y - spaceship.y) ** 2
                );
                if (dist < asteroid.radius + spaceship.radius) {
                    alert(`Game Over! Your score: ${score}`);
                    document.location.reload();
                }

                // Check collision with bullets
                bullets.forEach((bullet, bIndex) => {
                    const dist = Math.sqrt(
                        (asteroid.x - bullet.x) ** 2 +
                        (asteroid.y - bullet.y) ** 2
                    );
                    if (dist < asteroid.radius) {
                        bullets.splice(bIndex, 1); // Remove bullet
                        asteroids.splice(index, 1); // Remove asteroid
                        score += 10;
                        document.getElementById('score').textContent = 'Score: ' + score;
                    }
                });
            });
        }

        function spawnAsteroids() {
            setInterval(() => {
                asteroids.push(new Asteroid());
            }, 2000);
        }

        function updateGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            spaceship.draw();
            spaceship.update();
            asteroids.forEach((asteroid) => {
                asteroid.draw();
                asteroid.update();
            });
            drawBullets();
            checkCollisions();

            requestAnimationFrame(updateGame);
        }

        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });

        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        spawnAsteroids();
        updateGame();

    </script>
</body>
</html>