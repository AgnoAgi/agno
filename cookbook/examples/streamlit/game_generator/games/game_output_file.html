
<!DOCTYPE html>
<html>
<head>
    <title>Asteroids Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            background: #000;
            color: white;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 1px solid white;
        }
    </style>
</head>
<body>
    <div>
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <p id="instructions"></p>
        <button onclick="toggleFullScreen()">Toggle Fullscreen</button>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const instructionsText = document.getElementById('instructions');

        instructionsText.innerHTML = "Use arrows to rotate and move the ship. Spacebar to shoot. Avoid asteroids!";

        let ship = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            angle: 0,
            speed: 0
        };

        let bullets = [];
        let asteroids = [];

        function createAsteroid() {
            let size = Math.random() * 30 + 20;
            return {
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                dx: (Math.random() - 0.5) * 2,
                dy: (Math.random() - 0.5) * 2,
                size: size
            };
        }

        for (let i = 0; i < 5; i++) {
            asteroids.push(createAsteroid());
        }

        function drawShip() {
            ctx.save();
            ctx.translate(ship.x, ship.y);
            ctx.rotate(ship.angle);
            ctx.beginPath();
            ctx.moveTo(20, 0);
            ctx.lineTo(-10, 10);
            ctx.lineTo(-10, -10);
            ctx.closePath();
            ctx.fillStyle = 'white';
            ctx.fill();
            ctx.restore();
        }

        function updateShip() {
            ship.x += ship.speed * Math.cos(ship.angle);
            ship.y += ship.speed * Math.sin(ship.angle);

            if (ship.x < 0) ship.x = canvas.width;
            if (ship.x > canvas.width) ship.x = 0;
            if (ship.y < 0) ship.y = canvas.height;
            if (ship.y > canvas.height) ship.y = 0;
        }

        function drawAsteroids() {
            ctx.fillStyle = 'gray';
            asteroids.forEach(asteroid => {
                ctx.beginPath();
                ctx.arc(asteroid.x, asteroid.y, asteroid.size, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function updateAsteroids() {
            asteroids.forEach(asteroid => {
                asteroid.x += asteroid.dx;
                asteroid.y += asteroid.dy;

                if (asteroid.x < 0) asteroid.x = canvas.width;
                if (asteroid.x > canvas.width) asteroid.x = 0;
                if (asteroid.y < 0) asteroid.y = canvas.height;
                if (asteroid.y > canvas.height) asteroid.y = 0;
            });
        }

        function drawBullets() {
            ctx.fillStyle = 'red';
            bullets.forEach(bullet => {
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, 3, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function updateBullets() {
            bullets = bullets.filter(bullet => bullet.lifetime > 0);
            bullets.forEach(bullet => {
                bullet.x += bullet.dx;
                bullet.y += bullet.dy;
                bullet.lifetime--;
            });
        }

        function detectCollisions() {
            asteroids.forEach((asteroid, aIndex) => {
                const dist = Math.hypot(ship.x - asteroid.x, ship.y - asteroid.y);
                if (dist < asteroid.size) {
                    alert("You've died! Game Over.");
                    window.location.reload();
                }
                bullets.forEach((bullet, bIndex) => {
                    const bulletDist = Math.hypot(bullet.x - asteroid.x, bullet.y - asteroid.y);
                    if (bulletDist < asteroid.size) {
                        asteroids.splice(aIndex, 1);
                        bullets.splice(bIndex, 1);
                        asteroids.push(createAsteroid());
                    }
                });
            });
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            updateShip();
            updateBullets();
            updateAsteroids();

            drawShip();
            drawBullets();
            drawAsteroids();

            detectCollisions();

            requestAnimationFrame(gameLoop);
        }

        window.addEventListener('keydown', function(e) {
            switch (e.code) {
                case 'ArrowUp':
                    ship.speed = 2;
                    break;
                case 'ArrowLeft':
                    ship.angle -= 0.1;
                    break;
                case 'ArrowRight':
                    ship.angle += 0.1;
                    break;
                case 'Space':
                    bullets.push({
                        x: ship.x,
                        y: ship.y,
                        dx: Math.cos(ship.angle) * 5,
                        dy: Math.sin(ship.angle) * 5,
                        lifetime: 100
                    });
                    break;
            }
        });

        window.addEventListener('keyup', function(e) {
            if (e.code === 'ArrowUp') {
                ship.speed = 0;
            }
        });

        function toggleFullScreen() {
            let doc = window.document;
            let docEl = doc.documentElement;

            let requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
            let cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;

            if(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
                requestFullScreen.call(docEl);
            }
            else {
                cancelFullScreen.call(doc);
            }
        }

        gameLoop();
    </script>
</body>
</html>
