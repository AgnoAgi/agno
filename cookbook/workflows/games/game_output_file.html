
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird Clone</title>
    <style>
        body {
            background-color: #70c5ce;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        canvas {
            border: 1px solid #000;
        }
        #instructions {
            margin-bottom: 20px;
            font-size: 18px;
        }
    </style>
</head>
<body>

<div id="instructions">Press Space or click to make the bird fly!</div>
<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const context = canvas.getContext('2d');
const bird = new Image();
bird.src = 'https://i.imgur.com/YsC6Q2d.png';

const flySound = new Audio('https://www.soundjay.com/button/sounds/button-7.mp3');

const birdHeight = 24;
let birdX = 50;
let birdY = 150;
let birdVelocity = 0;
const gravity = 0.5;
const flyLift = -8;

const pipeWidth = 50;
const pipeGap = 150;
let pipeArray = [];
let pipeSpawnInterval = 0;

function createPipe() {
    let pipeHeight = Math.floor(Math.random() * (canvas.height - pipeGap - birdHeight)) + birdHeight;
    pipeArray.push({
        x: canvas.width,
        y: pipeHeight + pipeGap, // bottom pipe top y
        height: pipeHeight
    });
}

function drawBird() {
    context.drawImage(bird, birdX, birdY, 34, birdHeight);
}

function drawPipes() {
    for (let i = 0; i < pipeArray.length; i++) {
        context.fillStyle = '#008000';
        context.fillRect(pipeArray[i].x, 0, pipeWidth, pipeArray[i].height);
        context.fillRect(pipeArray[i].x, pipeArray[i].y, pipeWidth, canvas.height - pipeArray[i].y);
    }
}

function movePipes() {
    for (let i = 0; i < pipeArray.length; i++) {
        pipeArray[i].x--;
        if (pipeArray[i].x + pipeWidth < 0) {
            pipeArray.shift();
        }
        if (birdX + 34 > pipeArray[i].x && birdX < pipeArray[i].x + pipeWidth &&
            (birdY < pipeArray[i].height || birdY + birdHeight > pipeArray[i].y)) {
            gameOver();
            return;
        }
    }
}

function gameOver() {
    alert('Game Over! Click OK to restart.');
    location.reload();
}

function gameLoop() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    birdVelocity += gravity;
    birdY += birdVelocity;

    if (birdY + birdHeight >= canvas.height || birdY <= 0) {
        gameOver();
        return;
    }

    pipeSpawnInterval++;
    if (pipeSpawnInterval % 150 === 0) {
        createPipe();
    }

    drawBird();
    drawPipes();
    movePipes();

    requestAnimationFrame(gameLoop);
}

function fly() {
    birdVelocity = flyLift;
    flySound.play();
}

window.addEventListener('keydown', function(event) {
    if (event.code === 'Space') {
        fly();
    }
});

window.addEventListener('click', function() {
    fly();
});

createPipe();
gameLoop();

</script>

</body>
</html>
